module basePklProject

amends "pkl:Project"

import "pkl:reflect"

local myModule = reflect.Module(module)

local function findRootModule(mod: reflect.Module): Module =
  let (supermodule = mod.supermodule)
    if (supermodule == null || !supermodule.isAmend)
      mod.reflectee
    else
      findRootModule(supermodule)

local packageName: String = findRootModule(myModule).relativePathTo(module).last

package {
  name = packageName
  baseUri = "package://pkl-packages.lucsoft.deno.net/packages/\(name)"
  packageZipUrl =
    "https://pkl-packages.lucsoft.deno.net/packages/\(name)@\(version)/\(name)@\(version).zip"
  license = "MIT"
}
