/// KubernetesWatchTrigger watches kubernetes resource events and invokes functions.
///
/// This module was generated from the CustomResourceDefinition at
/// <file:///Users/lucsoft/Developer/infra-hmsys-sys/packages/io.Fission/>.
module io.fission.v1.KubernetesWatchTrigger

extends "@k8s/K8sResource.pkl"

import "@k8s/apimachinery/pkg/apis/meta/v1/ObjectMeta.pkl"

fixed apiVersion: "fission.io/v1"

fixed kind: "KubernetesWatchTrigger"

/// Standard object's metadata.
///
/// More info: <https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata>.
metadata: ObjectMeta?

/// KubernetesWatchTriggerSpec defines spec of KuberenetesWatchTrigger
spec: Spec

/// KubernetesWatchTriggerSpec defines spec of KuberenetesWatchTrigger
class Spec {
  /// The reference to a function for kubewatcher to invoke with when receiving events.
  functionref: Functionref

  /// Resource labels
  labelselector: Mapping<String, String>?

  namespace: String

  /// Type of resource to watch (Pod, Service, etc.)
  type: String
}

/// The reference to a function for kubewatcher to invoke with when receiving events.
class Functionref {
  /// Function Reference by weight. this map contains function name as key and its weight as the value.
  /// This is for canary upgrade purpose.
  functionweights: Mapping<String, Int>?

  /// Name of the function.
  name: String

  /// Type indicates whether this function reference is by name or selector. For now, the only supported
  /// reference type is by "name". Future reference types: * Function by label or annotation * Branch or
  /// tag of a versioned function * A "rolling upgrade" from one version of a function to another
  /// Available value: - name - function-weights
  type: String
}
