amends "@Resource/Entrypoint.pkl"

import "@ArgoCD/App.pkl"

import "./apps/ArgoCD.pkl"
import "./apps/InfraCertManager.pkl"
import "./apps/InfraIngressController.pkl"
import "./apps/Satisfactory.pkl"

local apps: Listing<App> = new {
  new {
    name = "infra-hetzner-index"
    namespace = "argocd"
    source {
      repoURL = "https://github.com/lucsoft/cluster"
      targetRevision = "main"
      path = "personal-cluster"
      plugin {
        parameters {
          new {
            name = "path"
            string = "index.pkl"
          }
        }
      }
    }
  }
  ArgoCD
  InfraCertManager
  InfraIngressController
  Satisfactory
}

resources {
  for (app in apps) {
    app.application
  }
}
